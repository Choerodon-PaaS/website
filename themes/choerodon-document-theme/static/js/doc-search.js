var $results,INDEX_DATA={};function initLunr(){$.getJSON("/docslunr.json").done(function(e){INDEX_DATA=e}).fail(function(e,n,t){var r=n+", "+t;console.error("Error getting Hugo index flie:",r)})}function initUI(){$results=$("#content-post"),$("#content").on("click","#search",function(){$("#content-post").html("");var e=$("#search-input").val(),n=search(e,500);void 0===n||0===n.length?($("#content-post .noresult").remove(),$results.append("<h1 class='noresult'>很抱歉，我们没有找到与“"+e+"“相关的文档</h1>")):renderResults(n)})}function escapeReg(e){return String(e).replace(/([\*\.\?\+\$\^\[\]\(\)\{\}\|\/\\])/g,"\\$1")}function search(e,n){if(null!=e&&""!==e.trim()){var t=[],r=-1;for(var o in INDEX_DATA)-1!==(r=INDEX_DATA[o].body.toLowerCase().indexOf(e.toLowerCase()))&&t.push({url:INDEX_DATA[o].url,title:INDEX_DATA[o].title,body:INDEX_DATA[o].body.substr(Math.max(0,r-50),n).replace(new RegExp("("+escapeReg(e)+")","gi"),'<span style="background:#ff0;">$1</span>')});return t}}function renderResults(e){if(e.length){$("#content-post .noresult").remove();var o="/zh/";-1!=window.location.href.indexOf("/en/")&&(o="/en/"),e.slice(0,10).forEach(function(e){var n=$('<div class="result-row">'),t=$('<a href="'+o+e.url+'"class="right-title">'+e.title+"</a>"),r=$('<div class="right-text">'+e.body+"</div>");n.append(t),n.append(r),n.append("</div>"),$results.append(n)})}}$(document).ready(function(){initLunr(),initUI()});