+++
title = "应用部署"
description = ""
weight = 2
+++

# 应用部署

提供可视化、一键式部署应用，支持并行部署和流水线无缝集成，实现部署环境标准化和部署过程自动化。
  
  - **菜单层次**：项目层
  - **菜单路径**：持续交付 > 部署流水线 > 应用部署
  - **默认角色**：项目所有者、项目成员、部署管理员
    <blockquote class="note">
         项目所有者和项目成员对应用部署只有查看界面的权限，不可进行编辑修改。
      </blockquote>

## 部署应用
部署应用是将一个版本的应用部署至指定环境的操作，提供可视化、一键式部署应用，支持并行部署和流水线无缝集成，实现部署环境标准化和部署过程自动化。

- 操作流程

 1. 使用部署管理员角色，选择前期所创建的项目应用；

 1. 选择版本；（前期创建的应用版本）

 1. 选择环境；（若所选的环境为故障中，则不能完成部署应用操作）

 1. 确认配置信息；

 1. 选择部署模式；（部署模式有创建实例和替换实例两种）

 1. 点击 `部署应用` 按钮，完成部署。

- 部署模式

 - 创建实例：建立新的实例。

 - 替换实例：滚动更新实例。

## 应用实例
通过容器状态、实例、应用版本、环境的信息来观察应用的部署情况。分为四种视图，里面有实例状态、运行详情和部署详情。

#### 四种分视图：
 1. **部署实例** 通过容器状态、实例、应用版本、环境来观察部署的情况。

    列表字段：

    a. **容器状态**：容器当前的状态。数字代表已运行的容器数量，当数字为“0”时，容器状态为空；绿色代表已通过健康检查，红色代表未通过健康检查。颜色会根据容器数量的状态发生比例变化。例如：容器数量为2，一个通过健康检查，一个未通过健康检查，则颜色状态为一半红色，一半绿色。

    b. 实例状态：在不同的操作类型中的实例状态不同。

    c. 实例名称：实例的名称。

    d. 应用：应用的名称及其版本号。

    e. 环境：环境的名称和环境编码。

    f. 点击页面右侧 ![详情按钮](/docs/user-guide/development-pipeline/image/详情按钮.png) 按钮 ，再点击`查看实例详情`，进入实例详情后观察其运行详情和部署详情。

 2. **单环境** 通过搜索单个环境名称来观察该环境应用中所部署的情况。
    
      可查询字段：

    a. 环境名称：对环境进行选择。

    b. 应用：选择相应环境下的应用。可以在环境中点击 ![查看部署应用按钮](/docs/user-guide/development-pipeline/image/查看部署应用按钮.png) 按钮，对当前进行快速部署。

      列表字段：

    a. 容器状态：容器当前的状态。(所代表含义与部署实例视图中容器状态相同)

    b. 实例状态：在不同的操作类型中的实例状态不同。

    c. 实例名称：实例的名称。

    d. 应用版本：应用的版本。

    e. 点击页面右侧 ![详情按钮](/docs/user-guide/development-pipeline/image/详情按钮.png) 按钮 ，再点击`查看实例详情`，进入实例详情后观察其运行详情和部署详情。

 3. **单应用** 观察单个应用在不同环境下的部署情况。
    
     可查询字段：

    a. 应用名称：选择应用的名称确定应用。

    b. 应用版本：选择应用版本。

    c. 环境：环境的状态和名称。可以在环境中点击 ![查看部署应用按钮](/docs/user-guide/development-pipeline/image/查看部署应用按钮.png) 按钮，对当前进行快速部署。

     列表字段：
   
    a. 容器状态：容器当前的状态。(所代表含义与部署实例视图中容器状态相同)

    b. 实例状态：在不同的操作类型中的实例状态不同。

    c. 实例名称：实例的名称。

    e. 点击页面右侧 ![详情按钮](/docs/user-guide/development-pipeline/image/详情按钮.png) 按钮 ，再点击`查看实例详情`，进入实例详情后观察其运行详情和部署详情。

 4. **多应用** 观察所有应用在不同环境下的部署情况，这里对实例详情不可查看。
    
      列表字段：

    a. 应用：应用的名称。

    b. 最新版本：最新的版本号。

#### 实例状态

不同的实例状态，可以执行的操作不同。

实例状态|可执行操作
----|----
处理中|查看实例详情
运行中|查看实例详情，修改配置信息，停止实例，删除实例
失败|查看实例详情，修改配置信息，删除实例
已停止|查看实例详情，修改配置信息，重启实例，删除实例
已删除|界面不显示

#### 运行详情
Chart 里定义的各个资源对象列表及参数信息。

资源对象|参数信息
----|----
Pod (环境)|name，ready，status，restarts，age
Deployment (部署)|name，desired，current，uo-to-date，available，age
Replicaset (副本集)|name，desired，current,ready，age
Service （网络）|name，type，cluster-ip，external-ip，port，age
Ingress （域名）|name，hosts，address，ports，age

#### 部署详情
包括报错信息、配置信息、阶段及日志。

### 修改配置信息
点击页面右侧 ![详情按钮](/docs/user-guide/deployment-pipeline/image/详情按钮.png) 按钮 ，再点击`修改配置信息`，进入修改配置信息界面后对实例配置信息进行修改后重新部署。

### 停止实例
点击页面右侧 ![详情按钮](/docs/user-guide/deployment-pipeline/image/详情按钮.png) 按钮 ，再点击`停止实例`，该实例即为停止状态，且容器状态停止。容器状态为“0”时，实例存在。
<blockquote class="note">
  停止实例后，停止实例按钮转变为重启实例按钮，点击重启实例按钮时，重启环境。
</blockquote>

### 删除实例
点击页面右侧 ![详情按钮](/docs/user-guide/deployment-pipeline/image/详情按钮.png) 按钮，再点击`删除实例`，该实例被删除。

