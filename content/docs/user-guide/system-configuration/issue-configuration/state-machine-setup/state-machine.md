+++
title = "状态机"
weight = 3
description = "设置不同问题类型状态的流转"
+++

# 状态机

不同的问题类型，有不同的状态流转，状态机可配置出不同状态之间的流转

- **菜单层次**：组织层
- **菜单路径**：问题设置 > 状态机设置 > 状态机
- **默认角色**：组织管理员

## 状态机列表
<p>状态机列表中显示出所有的状态机名称及状态机关联的状态机方案</p>

![enter description here](/docs/user-guide/system-configuration/issue-configuration/image/state-machine-list.png "state-machine")

1. 名称：状态机的名称
2. 关联方案：此状态机关联的状态机方案，点击方案跳转到`编辑状态机方案`页面
3. 操作：包括编辑、删除
    <blockquote class="note"><br/>
            1. 未被关联状态机方案的状态机，编辑按钮链接到`编辑状态机`页面；<br/>
            2. 被关联了状态机方案的状态机，编辑按钮链接到`查看状态机`页面；<br/>
            3. 只有未被关联状态机方案的状态机才显示删除按钮。
    </blockquote>

##  添加状态机
点击`添加状态机`按钮，在弹出的`添加状态机`页面中输入状态机的的名称、描述点击`创建`按钮
    <blockquote class="note">
            状态机名称不能重复
    </blockquote>
 
##  查看状态机

1. 关联了状态机方案的状态机，点击`编辑`图标 跳转到`查看状态机`页面。
2. 未关联状态机方案的状态机，点击`编辑`按钮，跳转到`编辑状态机`页面。
3. 在页面中可以看到状态机的图形形式和文本形式。
<p>
<blockquote class="note"><br/>
          图形形式：方框表示状态，箭头表示状态的流转方向，箭头上的字表示流转的条件。<br/>
          文本形式：状态列表示起始状态，转换列中带底色的表示终止状态，不带底色表示流转条件。
 </blockquote>
</p>

![enter description here](/docs/user-guide/system-configuration/issue-configuration/image/state-machine-image.png "state-machine-image")

## 编辑状态机
关联状态机方案的状态机,在查看状态机页面点击`编辑`按钮，链接到`编辑状态机`页面。<br>
未关联状态机方案的状态机,点击`编辑`图标，链接到`编辑状态机`页面。<br>
 以下操作均在编辑状态机页面进行:
    <p>
        <blockquote class="note"><br/>
        关联状态机方案的状态机:在编辑状态机时，编辑的是一个草稿状态机（即状态机的一个副本），只有草稿状态机发布（即副本覆盖原状态机）才会真正的修改状态机；若点击删除草稿，删除的只是草稿状态机，不会影响原状态机<br>
        未关联状态机方案的状态机:编辑的是原状态机
        </blockquote>
    </p>
### 图形方式编辑状态机：

![enter description here](/docs/user-guide/system-configuration/issue-configuration/image/edit-active-state-machine.png "edit-active-state-machine")

1. 添加状态：点击`添加状态`按钮,在`编辑状态机`页面中添加一个状态
2. 添加转换：点击`添加转换`按钮，在添加转换页面选择起始状态，目标状态，输入转换名称完成转换添加
3. 画布中编辑状态机：可以对画布中的状态机进行状态的移除，修改，机转换流的添加，修改，删除等操作
    <p>
        <blockquote class="note">
                <p>图形位置调整：拖动图中的状态框，转换流来调整位置</p>
                <p>状态框修改：双击状态框到修改状态页面更改状态</p>
                <p>添加转换流：从起始状态框到终止状态框的连接点添加连线并编辑名称</p>
                <p>修改转换流流向：拖动转换流的连接点来调整转换的起始位置</p>
                <p>修改转换流名称：双击转换流到修改转换流页面修改</p>
                <p>移除状态/转换流：选中图形，在卡片中点击`删除`按钮</p>
                <p>指定状态`让所有状态转换到这里`：选中状态框，在提示卡片中选择`让所有状态转换到这了`</p>
        </blockquote>
    </p>
4. 关联状态机方案的状态机，点击`发布`按钮，对草稿状态机进行发布，发布后的状态机会被广联的项目使用；未关联状态机方案的状态机，直接点击`返回`图标就已经发布
5. 关联状态机方案的状态机，点击`删除草稿`按钮，可以删除草稿状态机

### 文本方式编辑状态机：

![enter description here](/docs/user-guide/system-configuration/issue-configuration/image/edit-active-state-machine2.png "edit-active-state-machine2")

1. 添加状态：点击`添加状态`按钮,在`添加状态`页面中添加一个状态
 <p>
        <blockquote class="note">
            添加状态到状态机可以从现有的状态中添加，也可以新建一个状态后添加
        </blockquote>
    </p>

2. 添加转换：点击`添加转换`按钮，起始状态已经确定，选择目标状态，输入转换名称完成转换添加
3. 删除转换：在文本的的操作列中点击`删除`按钮，选择要删除的转换并删除
    <p>
        <blockquote class="note">
               当转换创建错误，只能删除后重新创建，当前版本暂时无法修改
        </blockquote>
    </p>
4.  关联状态机方案的状态机，点击`发布`按钮，对草稿状态机进行发布，发布后的状态机会被广联的项目使用；未关联状态机方案的状态机，直接点击`返回`图标就已经发布
5. 关联状态机方案的状态机，点击`删除草稿`按钮，可以删除草稿状态机

